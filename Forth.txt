: . cr print# ;

: IF immediate &IF call ;
: THEN immediate &THEN call ;
: ELSE immediate &ELSE call ;
: DO immediate &DO call ;
: AGAIN? immediate &AGAIN? call ;


(Use: 55 CONSTANT xx)
(Defines word XX which either puts value on stack or generates code to put value on the stack)
( -- )
: CONSTANT 
	&CONSTANT call   (not immediate)
	; 

(Use: 55 VARIABLE xx)
(then read and write it as a pointer)
( xx @ )
( newValue xx ! )
( -- )
: VARIABLE
	cpush    		(a=value) 
	HERE cpush 		(b=pointer)
	wordsize allot 
	a b !			(save value) 
	b CONSTANT 		(create word for the pointer)
	;


(single loop test - OK)
: count
	0 cpush   (a)
	DO
		a .
		a 1 add a!
		a 5000 lt AGAIN?
		
	;


(nested loops test - OK)
: mult
	1 cpush (a)
	1 cpush (b)
	DO
		1 b!
		DO
			cr a b mul print#
			b 1 add b!
			b 10 lt AGAIN?
			
		a 1 add a!
		a 10 lt AGAIN?
	;
	

: t0 IF . THEN ;

: t1 
	IF 1 ELSE 2 THEN ;

#END



